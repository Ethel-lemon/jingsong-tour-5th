<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>《惊悚旅游团》五周年纪念页</title>
    <link rel="stylesheet" href="index-style.css"> 
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 顶部头图+五周年主视觉 -->
    <header class="header">
        <div class="header-bg"></div>
        <div class="header-text">
            <h1>《惊悚旅游团》<span>五周年快乐！</span></h1>
            <p>【惊旅·难忘今喵】五周年活动</p>
            <p>执笔五载，岁岁年年 | 2021.2.14 - 2026.2.17</p>
        </div>
    </header>

    <!-- 核心内容区 -->
    <main class="content">
        <!-- 一、五周年寄语 -->
        <section class="section wish">
            <h2><i class="fas fa-heart"></i> 五周年寄语</h2>
            <p> “五年相伴，初心不改，愿故事长青，温暖永存。<br>&emsp;&emsp;感谢咕咕执笔让我们遇见这群可爱的人，五周年快乐，未来继续同行！”</p>
        </section>

        <!-- 二、经典台词墙 -->
        <section class="section words">
            <h2><i class="fas fa-quote-left"></i> 刻在心底的金句</h2>
            <div class="words-list">
                <p>当死亡倒计时归零，噩梦将成为现实。</p>
                <p>文明会一次次陨落，新生，却永远不会彻底消泯。周而复始，生生不息，正暗含了涅槃。文明的涅槃。</p>
                <p>星星藏起来了，今晚是一个漆黑无光的夜。没有梦的夜晚太冰冷孤单，却适合做濒死之人最终的坟墓。</p>
                <p>人在恶劣的自然下显得格外渺小，但正是这种渺小，在挑战自然，对抗自然，深入无人区时，才更令人触动。</p>
            </div>
        </section>

        <!-- 三、小说连载时间线 -->
        <section class="section timeline">
            <h2><i class="fas fa-clock"></i> 五载时光线</h2>
            <div class="timeline-list">
                <div class="timeline-item">
                    <span class="time">2021.2.14</span>
                    <p>《惊悚旅游团》在晋江文学城开始连载 </p>
                </div>
                <div class="timeline-item">
                    <span class="time">2022.8月中旬</span>
                    <p>更名为《无限旅游团》 </p>
                </div>
                <div class="timeline-item">
                    <span class="time">2022.2.27</span>
                    <p>第一首同人曲《问归途》发行 </p>
                </div>
                <div class="timeline-item">
                    <span class="time">2023.3.12</span>
                    <p>“冰岛惊魂”成为本书第一个连载超1年的副本</p>
                </div>
                <div class="timeline-item">
                    <span class="time">2025.11.22</span>
                    <p>第一次为主角卫洵举行生日庆祝活动 </p>
                </div>
                <div class="timeline-item five-year">
                    <span class="time">2026.2.14</span>
                    <p>五周年快乐！我们仍在故事里</p>
                </div>
            </div>
        </section>

        <!-- 作品内容板块 -->
        <section class="section works">
            <h2><i class="fas fa-book"></i> 作品内容</h2>
            <div class="works-content">
                <p>《惊悚旅游团》作品详情：</p>
                <div class="works-btn">
                    <a href="works-detail.html" target="_blank">
                        🔍 进入作品详情页
                    </a>
                </div>
            </div>
        </section>

        <!-- 小惊喜板块 -->
        <section class="section surprise">
            <h2><i class="fas fa-gift"></i> 小惊喜</h2>
            <div class="works-content">
                <p>五周年专属小彩蛋，等你来解锁～</p>
                <div class="works-btn">
                    <a href="play.html" target="_blank">
                        🎁 解锁五周年小惊喜
                    </a>
                </div>
            </div>
        </section>

        <!-- 四、我的读感碎碎念 -->
        <section class="section feeling">
            <h2><i class="fas fa-pen"></i> 予清的碎碎念</h2>
            <p>&emsp;&emsp;五年前，在我看完《惊悚练习生》，追平《惊封》之际，我发现了《惊悚旅游团》这本宝藏。<br>&emsp;&emsp;在第一个副本里，我就被洵崽这个可爱的小疯子吸引了，也正因如此《惊悚旅游团》成了我第一本做饭的小说，至今同时也是唯一一本。<br>&emsp;&emsp;虽说笔下的文字未必尽善尽美，但执笔创作的过程，已然给了我这份 “厨子” 满满的快乐。一晃五年倏忽而过，即便提笔时偶觉文思枯竭，仍想在《惊旅》五周年之际，落笔写下些什么，聊表心意。<br>&emsp;&emsp;感谢《惊悚旅游团》五年来的温暖陪伴，也感谢咕咕的执笔创作，让这些鲜活的角色与故事得以长存。五周年快乐，愿我们都能成为更好的自己，也愿能陪着书中的他们，一同奔赴更远的前路。<br>&emsp;&emsp;后续内容仍然在施工中，但是还是希望大家在这里玩得开心！五周年快乐！</p>
        </section>

        <!-- 五、致谢 -->
        <section class="section thanks">
            <h2><i class="fas fa-heart"></i> 致谢</h2>
            <div class="thanks-list">
                <h3>素材鸣谢</h3>
                    <p>✨ 感谢 @燕孤鸿 提供的高清封面图</p>
                    <p>✨ 感谢 @燕孤鸿 提供的角色图</p>
                    <p>✨ 感谢 @安洵与嬉 授权使用的角色同人图</p>
                    <p>✨ 感谢 @沄澜 授权使用的角色同人图</p>
                    <p>✨ 感谢 @喵吉 授权使用的角色同人图，以及提供的一些已整理过的文本内容</p>
                <h3>同好致谢</h3>
                    <p>✨ 感谢所有一起热爱《惊悚旅游团》的伙伴们</p>
                <h3>声明</h3>
                <p>✨ 如果因为疏忽而误使用了您创作的任何内容，可以联系邮箱：ethelzznlz@gmail.com，我将会为您署名或删除作品，感谢！</p>
                <p>✨ 如果有任何内容上的错误，可以联系邮箱：ethelzznlz@gmail.com。</p>
            </div>
        </section>

        <!-- 留言板板块 -->
        <section class="section comment">
            <h2><i class="fas fa-comments"></i> 留言板</h2>
            <div class="github-comment">
                <!-- 留言表单 -->
                <div class="comment-form">
                    <input type="text" id="comment-author" placeholder="你的昵称" maxlength="20">
                    <textarea id="comment-body" placeholder="来聊聊你最喜欢的剧情或角色吧~ 🎉留言显示功能正在抢修中~" rows="4" maxlength="500"></textarea>
                    <button onclick="submitComment()">提交留言</button>
                </div>
<!-- 这里是要注释的内容，
                     留言列表（只显示最新1条） + 查看全部按钮 
                <div class="comment-list" id="latest-comment-list">
                         查看全部留言按钮 
                    <div class="works-btn" id="view-all-comments-btn" style="display: none; margin-bottom: 20px;">
                        <a href="all-comments.html" target="_blank">
                            💬 查看所有留言
                        </a>
                    </div>
                         最新留言展示区 
                    <div class="no-comment">暂无留言，快来抢沙发～</div>
                </div>
            </div>
        </section>
-->
        <!-- 留言板核心脚本 -->
        <script>
            // ========== 配置项 ==========
            const GITHUB_USER = "Ethel-lemon";           // GitHub用户名
            const REPO_NAME = "jingsonglyt-comments";    // 留言仓库名
            const ISSUE_NUMBER = 1;                      // Issue编号
            const BACKEND_URL = "https://comment-api.vercel.app/api/submit-comment"; // Vercel后端地址
<!-- 这里是要注释的内容，
            // ========== 页面加载时加载最新留言 ==========
            window.onload = function() {
                document.body.classList.add('loaded');
                setTimeout(showInvitation, 2000); // 延迟2秒弹出卫洵邀请
                fetchLatestComment(); // 加载最新1条留言
            };

            // ========== 获取最新1条留言 ==========
            async function fetchLatestComment() {
                const latestCommentList = document.getElementById("latest-comment-list");
                const viewAllBtn = document.getElementById("view-all-comments-btn");
                
                try {
                    const response = await fetch(
                        `https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/issues/${ISSUE_NUMBER}/comments`,
                        {
                            headers: {
                                Accept: "application/vnd.github.v3+json"
                            },
                        }
                    );

                    if (!response.ok) throw new Error("获取留言失败");
                    const comments = await response.json();

                    // 处理无留言的情况
                    if (comments.length === 0) {
                        latestCommentList.innerHTML = `
                            <div class="works-btn" id="view-all-comments-btn" style="display: none; margin-bottom: 20px;">
                                <a href="all-comments.html" target="_blank">💬 查看所有留言</a>
                            </div>
                            <div class="no-comment">暂无留言，快来抢沙发～</div>
                        `;
                        return;
                    }

                    // 按时间倒序排序，取最新1条
                    const sortedComments = comments.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
                    const latestComment = sortedComments[0];
                    
                    // 渲染最新1条留言 + 显示查看全部按钮
                    latestCommentList.innerHTML = `
                        <div class="works-btn" id="view-all-comments-btn" style="display: block; margin-bottom: 20px;">
                            <a href="all-comments.html" target="_blank">💬 查看所有留言</a>
                        </div>
                        <div class="comment-item">
                            <div class="header">
                                <span class="name">${latestComment.body.match(/\[昵称\]: (.*?) \n\[内容\]:/)?.[1] || latestComment.user.login}</span>
                                <span class="time">${new Date(latestComment.created_at).toLocaleString("zh-CN")}</span>
                            </div>
                            <div class="content">${latestComment.body.replace(/\[昵称\]: .*? \n\[内容\]:/, "").trim().replace(/\n/g, "<br>")}</div>
                        </div>
                    `;

                } catch (error) {
                    console.error("加载留言失败：", error);
                    latestCommentList.innerHTML = `
                        <div class="works-btn" id="view-all-comments-btn" style="display: none; margin-bottom: 20px;">
                            <a href="all-comments.html" target="_blank">💬 查看所有留言</a>
                        </div>
                        <div class="no-comment">加载留言失败，请稍后再试～</div>
                    `;
                }
            }

            // ========== 提交留言（调用后端API） ==========
            async function submitComment() {
                const authorInput = document.getElementById("comment-author");
                const bodyInput = document.getElementById("comment-body");
                
                const author = authorInput.value.trim() || "匿名旅友";
                const body = bodyInput.value.trim();

                if (!body) {
                    alert("留言内容不能为空～");
                    return;
                }

                try {
                    const response = await fetch(BACKEND_URL, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({ author, body })
                    });

                    const result = await response.json();
                    if (response.ok) {
                        alert("留言提交成功～");
                        bodyInput.value = ""; // 清空内容框
                        authorInput.value = ""; // 清空昵称框
                        fetchLatestComment(); // 刷新最新留言
                    } else {
                        alert(`提交失败：${result.error || '未知错误'}`);
                    }
                } catch (error) {
                    alert("网络出错，请稍后再试～");
                    console.error('前端报错：', error);
                }
            }
-->
            // ========== 卫洵邀请弹窗逻辑 ==========
            function showInvitation() {
                const overlay = document.createElement('div');
                overlay.className = 'modal-overlay';
                overlay.style.display = 'flex';
                overlay.innerHTML = `
                    <div class="modal">
                        <h3>📩 卫洵向你发来了一个邀请</h3>
                        <p>是否查看？</p>
                        <button class="modal-btn confirm" onclick="showJoinModal()">是</button>
                        <button class="modal-btn cancel" onclick="closeModal(this)">否</button>
                    </div>
                `;
                document.body.appendChild(overlay);
            }

            function showJoinModal() {
                closeModal();
                const overlay = document.createElement('div');
                overlay.className = 'modal-overlay';
                overlay.style.display = 'flex';
                overlay.innerHTML = `
                    <div class="modal">
                        <h3>🤝 你是否要加入互助会？</h3>
                        <button class="modal-btn confirm" onclick="showNameInput()">是</button>
                    </div>
                `;
                document.body.appendChild(overlay);
            }

            function showNameInput() {
                closeModal();
                const overlay = document.createElement('div');
                overlay.className = 'modal-overlay';
                overlay.style.display = 'flex';
                overlay.innerHTML = `
                    <div class="modal">
                        <h3>✍️ 输入你的名字</h3>
                        <input type="text" class="modal-input" placeholder="请输入你的昵称" id="username">
                        <button class="modal-btn confirm" onclick="confirmJoin()">确认</button>
                    </div>
                `;
                document.body.appendChild(overlay);
            }

            function confirmJoin() {
                const username = document.getElementById('username').value || '旅团成员';
                closeModal();
                const overlay = document.createElement('div');
                overlay.className = 'modal-overlay';
                overlay.style.display = 'flex';
                overlay.innerHTML = `
                    <div class="modal">
                        <h3>🎉 你已经成功加入！</h3>
                        <p>欢迎，${username}！我们都是互助会的一员了✨</p>
                        <button class="modal-btn confirm" onclick="closeModal()">关闭</button>
                    </div>
                `;
                document.body.appendChild(overlay);
            }

            function closeModal(btn) {
                const overlay = document.querySelector('.modal-overlay');
                if (overlay) overlay.remove();
            }
        </script>
    </main>

    <!-- 底部版权/署名 -->
    <footer class="footer">
        <p>《惊悚旅游团》五周年纪念 · 感谢每一位读者的陪伴</p>
        <p>©2026 制作：予清 | 致最爱的《惊悚旅游团》五周年</p>
    </footer>

    <!-- 平滑滚动JS -->
    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
